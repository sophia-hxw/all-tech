# 1 概述
电商所有模块中，订单系统时非常核心的子系统，决定了整个流程能不能顺畅的执行，起着承上启下的作用，其他模块都是围绕订单系统进行构建的，订单系统出问题，或者功能流程涉及不完善、不准确，将会造成整个电商系统整体或者局部业务流转不顺畅，甚至导致项目的失败。

订单系统的作用是：管理订单类型、订单状态，收集关于商品、优惠、用户、收获信息、支付信息等一系列的订单实时数据，进行库存更新、订单下发等一系列操作。订单系统业务的基本模型涉及用户、商品（库存）、订单、付款。订单基本流程是下订单->减库存，在两部必须同时完成，不能下了订单不减库存（超卖），或者减了库存没有生成订单（少卖）。

下面从需求分析的角度，看看B2C电商中先款后货模式下的订单系统设计的过程。



# 2 角色
一个订单系统，设计到的角色包括：

## 2.1 实体角色
- C端用户
- B端用户
- 电商平台
- 配送商
- 第三方平台

## 系统关系
见图



# 3 场景（用例）

见图

# 4 功能

## 4.1 订单服务
用户日常使用的服务和页面，主要有订单列表、订单详情、在线下单等，还包括为公共业务木块提供的多维度的订单数据服务

## 4.2 订单逻辑
订单系统的核心，负责管理订单创建、订单支付、订单生产、订单确认、订单完成、取消订单等，还涉及到复杂的订单状态规则、订单金额计算以及增减库存规则等

## 4.3 底层服务
信息化建设大道一定程度的企业，一般会将公司公共服务模块化，比如：产品，会构建对应的产品系统、代码、数据库、接口等相对独立。


# 5 实体

![dingdan](订单.png)

# 6 流程
